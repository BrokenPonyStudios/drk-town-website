---
import Layout from '../../layouts/Layout.astro';

// This command gets all your news articles from the content folder
const posts = await Astro.glob('../content/news/*.md');
---
<Layout title="Aktuelles - DRK Beindersheim">
    <h1 class="text-4xl font-bold text-red-700 mb-6">Aktuelles & Termine</h1>
    <p class="text-lg mb-8">
        Hier finden Sie die neuesten Meldungen, Berichte von unseren Einsätzen und Veranstaltungen sowie wichtige Termine.
    </p>

    <div class="space-y-8">
        {posts.sort((a, b) => new Date(b.frontmatter.pubDate).valueOf() - new Date(a.frontmatter.pubDate).valueOf()).map((post) => (
            <article class="bg-white p-6 rounded-lg shadow-md border-l-4 border-red-700 flex flex-col md:flex-row gap-6">
                {post.frontmatter.heroImage && (
                    <img src={post.frontmatter.heroImage} alt="" class="w-full md:w-1/3 h-48 object-cover rounded-md"/>
                )}
                <div class="flex-1">
                    <h2 class="text-2xl font-semibold mb-2">
                        <a href={post.url} class="hover:text-red-700 transition-colors">{post.frontmatter.title}</a>
                    </h2>
                    <p class="text-sm text-gray-500 mb-4">
                        Veröffentlicht am: {new Date(post.frontmatter.pubDate).toLocaleDateString('de-DE')}
                    </p>
                    <p class="text-gray-700">{post.frontmatter.description}</p>
                    <a href={post.url} class="text-red-700 hover:underline font-semibold mt-4 inline-block">Weiterlesen &rarr;</a>
                </div>
            </article>
        ))}

        {posts.length === 0 && (
             <div class="bg-blue-100 border-l-4 border-blue-500 text-blue-700 p-4" role="alert">
                <p class="font-bold">Noch keine Beiträge</p>
                <p>Sobald der erste Beitrag im CMS veröffentlicht wird, erscheint er hier.</p>
            </div>
        )}
    </div>
</Layout>